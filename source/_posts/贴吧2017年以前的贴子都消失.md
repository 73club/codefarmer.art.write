---
title: 如何让贴吧2017年前的贴子消失？
date: 2019-05-14 16:37:29
tags: [贴吧]
categories: [瞎说]
---

> 百度贴吧今日发布维护公告，因系统维护历史数据，2017年1月1日以前的贴子暂时无法访问，修复时间另行通知。届时在访问贴吧时可能遇到数据加载失败或者加载中，以及帖子数量减少的现象，在查看回帖内容时也可能会报错

那么如何让贴吧2017年以前的贴子都消失呢?

我猜是这么实现的

1. 找到2016年12月31日24:00时发的贴子 ID，比如 102208882033
2. 获取贴子信息的Service里将ID小于上面数值的贴子内容屏蔽

```php
public function mGetPostInfo($arrParam){
  ...
  $arrPostIds = $arrParam['post_id'];
  foreach(arrPostIds as $index => $id) {
    if($id < 102208882033) {
      unset($arrPostIds[$index]);
    }
  }
  array_values(arrPostIds);
  ...

}

```

因为贴子的翻页和总数数据都还保留，所以不应该是从索引上删除的。

另外这样屏蔽的贴子，贴子内容其实还在，只不过从获取贴子信息的地方屏蔽了。

缺点就是翻页其实也会获取贴子信息，只不过获取到的是空的，部分业务逻辑需要兼容一下。

对于为什么会这样？官方说系统维护。按理来说系统维护应该会给一个截止日期，对于没有截止日期的维护...大家懂得

*从此留下传说，2019年的一天，UEG同学打个响指，2017年前的贴子都消失了。*